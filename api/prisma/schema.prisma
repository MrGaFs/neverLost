generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Picture {
  id      Int    @id @default(autoincrement())
  user_id Int    @unique
  Path    String
  User    User   @relation(fields: [user_id], references: [id])
  feed Feed?
}

model Ultimate_user {
  id                  Int             @id @default(autoincrement())
  user_id             Int             @unique
  family_admin_id     Int
  medical_history     String
  Ultimate_user       Ultimate_user   @relation("Ultimate_userToUltimate_user_family_admin_id", fields: [family_admin_id], references: [id])
  User                User            @relation(fields: [user_id], references: [id])
  other_Ultimate_user Ultimate_user[] @relation("Ultimate_userToUltimate_user_family_admin_id")
}

model User {
  id            Int            @id @default(autoincrement())
  username      String         @unique @db.VarChar(255)
  first_name    String         @db.VarChar(255)
  last_name     String         @db.VarChar(255)
  national_id   String         @unique @db.VarChar(14)
  gender        Gender
  phone         String         @db.VarChar(13)
  email         String         @unique @db.VarChar(255)
  password      String         @db.VarChar(255)
  created_at    DateTime       @default(now())
  updated_at    DateTime
  address       String
  Picture       Picture?
  Ultimate_user Ultimate_user?
}

enum Gender {
  male
  female
  other
}

model Report {
  id			Int			@id @default(autoincrement())
  lost_num		Int             
  location		String		@db.VarChar(255)
  gender		Gender
  age			Int
}

model Feed {
	id			Int			@id @default(autoincrement())
  Description	String
  pic_id Int
  pic 			Picture		@relation(fields: [pic_id],references: [id] )
}
